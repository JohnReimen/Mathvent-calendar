<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mathvent Calendar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --page-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
      --door-border: rgba(255, 255, 255, 0.8);
      --door-border-hover: #ffffff;
      --door-bg: rgba(0, 0, 0, 0.15);
      --door-bg-hover: rgba(0, 0, 0, 0.35);
      --transition-fast: 0.3s ease;
      --transition-slow: 0.5s ease;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #1c2541, #0b1020 55%, #020308);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      animation: bodyFadeIn 1.2s ease both;
    }

    @keyframes bodyFadeIn {
      from {
        opacity: 0;
        transform: scale(0.99);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .page {
      position: relative;
      width: min(90vw, 70vh * 210 / 297); /* A4 ratio on screen */
      aspect-ratio: 210 / 297;
      background-image: url("santa_math_comic.jpg"); /* your background */
      background-size: cover;
      background-position: center;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--page-shadow);
      padding: 1rem;
      display: flex;
      flex-direction: column;
      justify-content: stretch;
      color: #fff;
      backdrop-filter: blur(0.5px);
      transform-origin: 50% 50%;
      transition:
        transform 0.4s ease,
        transform-origin 0.4s ease;
    }

    /* Zoom effect when any door is open â€“ scale is set here */
    .page.zoomed {
      transform: scale(3);
    }

    .header {
      text-align: center;
      padding-bottom: 0.5rem;
      text-shadow: 0 0 6px rgba(0, 0, 0, 0.6);
      pointer-events: none;
      user-select: none;
    }

    .header h1 {
      margin: 0.1rem 0 0.2rem;
      font-size: clamp(1.2rem, 2.5vw, 1.6rem);
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .header p {
      margin: 0;
      font-size: 0.75rem;
      opacity: 0.8;
    }

    .grid {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      grid-template-rows: repeat(4, 1fr);
      gap: 0.35rem;
    }

    /* Each grid cell */
    .door-slot {
      position: relative;
      perspective: 800px; /* for 3D flap */
    }

    /* The flap itself */
    .door {
      position: absolute;
      inset: 0;
      border: 2px solid var(--door-border);
      border-radius: 4px;
      background: var(--door-bg);
      cursor: pointer;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      transition:
        transform var(--transition-slow),
        box-shadow var(--transition-slow),
        border-color var(--transition-fast),
        background var(--transition-fast),
        opacity 0.25s ease;
      backdrop-filter: blur(1px);
      transform-style: preserve-3d;
      transform-origin: left center; /* default hinge on left */
      z-index: 2; /* flap above text */
    }

    .door.hinge-right {
      transform-origin: right center;
    }

    .door:hover {
      border-color: var(--door-border-hover);
      background: var(--door-bg-hover);
      box-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
    }

    .door-number {
      font-size: clamp(0.9rem, 2.2vw, 1.1rem);
      font-weight: 700;
      text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);
      z-index: 1;
      transition: opacity var(--transition-fast);
    }

    /* Question view BEHIND the flap */
    .question-content {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.2rem 0.8rem 0.7rem;
      text-align: center;
      font-size: clamp(0.55rem, 1.2vw, 0.75rem);
      line-height: 1.4;
      color: #000;
      background: transparent; /* transparent when door is closed */
      z-index: 0; /* below flap */
    }

    .question-text {
      padding: 0 0.3rem;
      opacity: 0;                /* ðŸ”¹ hidden by default */
      transition: opacity 0.3s ease;
    }

    /* Only when the door is active/open, background becomes white */
    .door-slot.active .question-content {
      background: #ffffff;
    }

    /* ðŸ”¹ Show text only when the slot is active (door open) */
    .door-slot.active .question-text {
      opacity: 1;
    }

    /* Close "X" inside the white question box */
    .close-question {
      position: absolute;
      top: 4px;
      right: 4px;
      background: rgba(0,0,0,0.65);
      color: white;
      border: none;
      border-radius: 50%;
      width: 10px;
      height: 10px;
      font-size: 5px;
      font-weight: bold;
      display: none; /* only show when open */
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .door-slot.active .close-question {
      display: flex;
    }

    .close-question:hover {
      background: rgba(0,0,0,0.85);
    }

    /* Flap open states (Advent-style) */
    .door.open.hinge-left {
      transform: rotateY(-120deg);
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.7);
    }

    .door.open.hinge-right {
      transform: rotateY(120deg);
      box-shadow: 0 0 12px rgba(0, 0, 0, 0.7);
    }

    .door.open .door-number {
      opacity: 0;
    }

    /* FRONT PAGE STYLES */
    .front-page {
      position: fixed;
      inset: 0;
      background-image: url("School.jpg");
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      color: white;
      text-align: center;
      animation: fpFadeIn 0.7s ease both;
    }

    .fp-content h1 {
      font-size: clamp(1.8rem, 5vw, 3rem);
      margin-bottom: 1.5rem;
      text-shadow: 0 0 8px rgba(0,0,0,0.4);
      font-weight: 900;
      line-height: 1.2;
    }

    #start-button {
  position: absolute;
  top: 20px;
  right: 20px;

  padding: 0.8rem 1.8rem;
  font-size: 1.1rem;
  background: green;
  color: #ffffff;
  border: 2px solid #ffffff;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 700;
  box-shadow: none;
  transition:
    transform 0.2s ease,
    background 0.2s ease,
    border-color 0.2s ease;
}
    #start-button:hover {
      transform: scale(1.05);
      background: rgba(0, 0, 0, 0.25);
      border-color: #ffffff;
    }

    @keyframes fpFadeOut {
      to {
        opacity: 0;
        pointer-events: none;
        visibility: hidden;
      }
    }

    @keyframes fpFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @media (max-width: 480px) {
      .page {
        padding: 0.7rem;
      }
      .grid {
        gap: 0.25rem;
      }
    }
  </style>
</head>
<body>

  <!-- BACKGROUND MUSIC (started when pressing front-page button) -->
  <audio id="bg-music" src="we-wish-you-a-merry-christmas-168945.mp3" loop></audio>

  <!-- FRONT PAGE OVERLAY -->
  <div class="front-page" id="front-page">
    <div class="fp-content">
      <button id="start-button">Enter Santa's school for smart elves</button>
    </div>
  </div>

  <!-- MAIN CALENDAR PAGE -->
  <div class="page" id="page">
    <div class="header">
      <h1>Mathvent Calendar</h1>
    </div>

    <div class="grid">
      <!-- 24 doors â†’ each in a .door-slot (flap + text behind) -->

      <div class="door-slot">
        <div class="door" data-index="0">
          <span class="door-number">7</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="7">
          <span class="door-number">14</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="14">
          <span class="door-number">22</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="22">
          <span class="door-number">3</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="3">
          <span class="door-number">18</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="18">
          <span class="door-number">11</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="11">
          <span class="door-number">1</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="1">
          <span class="door-number">24</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="24">
          <span class="door-number">6</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="6">
          <span class="door-number">17</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="17">
          <span class="door-number">9</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="9">
          <span class="door-number">20</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="20">
          <span class="door-number">13</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="13">
          <span class="door-number">2</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="2">
          <span class="door-number">15</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="15">
          <span class="door-number">8</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="8">
          <span class="door-number">4</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="4">
          <span class="door-number">23</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="23">
          <span class="door-number">5</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="5">
          <span class="door-number">12</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="12">
          <span class="door-number">19</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="19">
          <span class="door-number">10</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="10">
          <span class="door-number">21</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>

      <div class="door-slot">
        <div class="door" data-index="21">
          <span class="door-number">16</span>
        </div>
        <div class="question-content">
          <button class="close-question">âœ•</button>
          <span class="question-text"></span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ðŸ‘‰ EDIT YOUR QUESTIONS HERE
    const questions = [
      "Day 7 â€“ Question text goes here.",
      "Day 14 â€“ Question text goes here.",
      "Day 22 â€“ Question text goes here.",
      "Day 3 â€“ Question text goes here.",
      "Day 18 â€“ Question text goes here.",
      "Day 11 â€“ Question text goes here.",
      "Day 1 â€“ Question text goes here.",
      "Day 24 â€“ Question text goes here.",
      "Day 6 â€“ Question text goes here.",
      "Day 17 â€“ Question text goes here.",
      "Day 9 â€“ Question text goes here.",
      "Day 20 â€“ Question text goes here.",
      "Day 13 â€“ Question text goes here.",
      "Day 2 â€“ Question text goes here.",
      "Day 15 â€“ Question text goes here.",
      "Day 8 â€“ Question text goes here.",
      "Day 4 â€“ Question text goes here.",
      "Day 23 â€“ Question text goes here.",
      "Day 5 â€“ Question text goes here.",
      "Day 12 â€“ Question text goes here.",
      "Day 19 â€“ Question text goes here.",
      "Day 10 â€“ Question text goes here.",
      "Day 21 â€“ Question text goes here.",
      "Day 16 â€“ Question text goes here."
    ];

    const page = document.getElementById("page");
    const doors = document.querySelectorAll(".door");
    const bgMusic = document.getElementById("bg-music");

    const frontPage = document.getElementById("front-page");
    const startButton = document.getElementById("start-button");

    let openDoor = null;
    let activeSlot = null;

    // Assign hinge direction (towards center) and fill question texts
    doors.forEach((door, index) => {
      // Hinge side: left 3 columns open right, right 3 columns open left
      const col = index % 6;
      if (col >= 3) {
        door.classList.add("hinge-right");
      } else {
        door.classList.add("hinge-left");
      }

      const slot = door.parentElement;
      const questionTextEl = slot.querySelector(".question-text");
      if (questions[index]) {
        questionTextEl.textContent = questions[index];
      } else {
        questionTextEl.textContent = "Question " + (index + 1);
      }
    });

    // Handle door clicks (open door flap + zoom toward that door)
    doors.forEach((door) => {
      door.addEventListener("click", () => {
        const alreadyOpen = door.classList.contains("open");
        if (alreadyOpen) {
          return;
        }

        const slot = door.parentElement;

        if (openDoor && openDoor !== door) {
          openDoor.classList.remove("open");
        }
        if (activeSlot && activeSlot !== slot) {
          activeSlot.classList.remove("active");
        }

        openDoor = door;
        activeSlot = slot;

        // Calculate transform-origin so zoom focuses on this door
        const pageRect = page.getBoundingClientRect();
        const doorRect = door.getBoundingClientRect();
        const doorCenterX = doorRect.left + doorRect.width / 2;
        const doorCenterY = doorRect.top + doorRect.height / 2;

        const originXPercent = ((doorCenterX - pageRect.left) / pageRect.width) * 100;
        const originYPercent = ((doorCenterY - pageRect.top) / pageRect.height) * 100;

        page.style.transformOrigin = `${originXPercent}% ${originYPercent}%`;
        page.classList.add("zoomed");

        door.classList.add("open");
        slot.classList.add("active");
      });
    });

    // Close button inside each question box
    document.querySelectorAll(".close-question").forEach((btn) => {
      btn.addEventListener("click", (event) => {
        event.stopPropagation(); // don't trigger anything behind

        const slot = btn.closest(".door-slot");
        const door = slot.querySelector(".door");

        if (door && door.classList.contains("open")) {
          door.classList.remove("open");
          if (slot && slot.classList.contains("active")) {
            slot.classList.remove("active");
          }
          openDoor = null;
          activeSlot = null;

          // Reset zoom & origin back to center
          page.classList.remove("zoomed");
          page.style.transformOrigin = "50% 50%";
        }
      });
    });

    // Front page button: fade out + start music
    startButton.addEventListener("click", () => {
      // fade out animation
      frontPage.style.animation = "fpFadeOut 0.6s forwards";

      // start music after user gesture (should bypass autoplay blocking)
      if (bgMusic) {
        bgMusic.play().catch(() => {
          // if something fails, just quietly ignore
        });
      }
    });
  </script>
</body>
</html>
